% REPORT DOCUMENT STYLE -- Released 23 September 1985
%    for LaTeX version 2.09
% Copyright (C) 1985 by Leslie Lamport

% $Id: thesis.doc,v 1.10 88/04/05 10:05:47 riedl Exp Locker: riedl $
%
% Converted to LaTeX version 2.09 January 20, 1986 by John Riedl
% report format adapted for Purdue theses July, 1985 by Stephan Bectolsheim
% 
\newcommand{\comment}[1]{}
% **** Modification History ****
%
%  6/17/86 -- Changed textfraction to require at least half text  - jtr
%  6/17/86 -- Double spacing between lot and lof entries          - jtr
%  6/26/86 -- Checked into RCS                                    - jtr
%
\comment{
$Log:	thesis.doc,v $
Revision 1.10  88/04/05  10:05:47  riedl
Added Craig Wills' changes to:
  increase space after heading 'BIBLIOGRAPHY'
  prevent pagebreaks in the middle of bibliography entries.

Revision 1.9 89/01/13 09:10:00 buG
o \acknowledgments and \endacknowledgments

Revision 1.8  87/07/01  10:27:43  riedl
o \tableofcontents and \endabstract change back to \doublespace

Revision 1.7  87/04/22  16:25:16  riedl
make

Revision 1.4  86/07/03  11:36:59  riedl
Fixed listoffigures/listoftables commands so that table of contents
entries are created outside of the argument of the chapter command.
The \uppercase I added to the chapter command seems to have killed
them.

Revision 1.3  86/07/01  14:17:18  riedl
>From Jameson Burt

- multi-line chapter headings
- separator pages
- special table of contents entry for appendices
- 'Figure', 'Table' and 'Page' as necessary in toc, lot, lof

I added the following features:

* New environments
  - acknowledgments
  - dedication (automatic vertical centering)
  - vita
  - abstract
* each of these has the following features:
  - separator page and toc entry if necessary
  - title centered and two inches from top of page
  - correct page numbering
  - used with \begin{abstract} ... abstract text ... \end{abstract}

* new maketitle command for thesis
  - creates correct title page with fancy `Submitted to the Faculty' stuff
  - uses \author, \title, and \date
  - folds title to uppercase
  - permits \thanks, but ignores it

* chapter titles are automatically folded to uppercase
  - new command `\nofoldchapter' that works like old `\chapter'
  - folds toc entry also

* \singlespace and \doublespace commands are built-in to style
  - same function as old \os and \ds 

* improved \appendix command
  - produces separator page
  - generates correct toc entry
  - \appendix* prints word `APPENDIX' instead of `APPENDICES'

John Riedl

Revision 1.2  86/06/26  10:22:09  riedl
fixed RCS header stuff

Revision 1.1  86/06/26  10:05:30  riedl
Initial revision
}
%
\typeout{Document Style 'thesis'.  Released $Date: 88/04/05 10:05:47 $}

%  The type size option is handled by reading a different file for each
%  size, as follows, to define font size-specific commands:
%       10pt : the10, 11pt : the11, 12pt : the12
%  Implemented by \def'ing \@ptsize to last digit of file name.
%

\def\@ptsize{0}               % Default is the10.STY
\@namedef{ds@11pt}{\def\@ptsize{1}} % 11pt option reads in the11.STY
\@namedef{ds@12pt}{\def\@ptsize{2}} % 12pt option reads in the12.STY

%  Two-side or one-side printing.
%
% \@twosidefalse               %  Default is one-sided printing.
\def\ds@twoside{\@twosidetrue  %  Defines twoside option.
           \@mparswitchtrue}   %    Marginpars go on outside of page.
%  draft option
%
% \overfullrule = 0pt             % Default is don't mark overfull hboxes.
\def\ds@draft{\overfullrule 5pt}  % Causes overfull hboxes to be marked.

% The \@options command causes the execution of every command \ds@FOO 
% which is defined and for which the user typed the FOO option in his
% \documentstyle command.  For every option BAR he typed for which
% \ds@BAR is not defined, the file BAR.sty will be read after the present
% (main) .STY file is executed.

\@options

\input the1\@ptsize.sty\relax


%    ****************************************
%    *                LISTS                 *
%    ****************************************
%

% ENUMERATE
%  Enumeration is done with four counters: enumi, enumii, enumiii
%  and enumiv, where enumN controls the numbering of the Nth level
%  enumeration.  The label is generated by the commands \labelenumi 
%  ... \labelenumiv.  The expansion of \p@enumN\theenumN defines the 
%  output of a \ref command.  

\def\labelenumi{\arabic{enumi}.}    
\def\theenumi{\arabic{enumi}}
 
\def\labelenumii{(\alph{enumii})}
\def\theenumii{\alph{enumii}}
\def\p@enumii{\theenumi}

\def\labelenumiii{\roman{enumiii}.}
\def\theenumiii{\roman{enumiii}}
\def\p@enumiii{\theenumi(\theenumii)}

\def\labelenumiv{\Alph{enumiv}.}
\def\theenumiv{\Alph{enumiv}}     
\def\p@enumiv{\p@enumiii\theenumiii}

% ITEMIZE
% Itemization is controlled by four commands: \labelitemi, \labelitemii,
% \labelitemiii, and \labelitemiv, which define the labels of the various 
% itemization levels.

\def\labelitemi{$\bullet$}
\def\labelitemii{\bf --}
\def\labelitemiii{$\ast$}
\def\labelitemiv{$\cdot$}


% VERSE
%   The verse environment is defined by making clever use of the
%   list environment's parameters.  The user types \\ to end a line.
%   This is implemented by \let'in \\ equal \@centercr.
%
\def\verse{\let\\=\@centercr  
  \list{}{\itemsep\z@ \itemindent -1.5em\listparindent \itemindent 
          \rightmargin\leftmargin\advance\leftmargin 1.5em}\item[]}
\let\endverse\endlist

% QUOTATION
%   Fills lines
%   Indents paragraph
%   
\def\quotation{\list{}{\listparindent 1.5em
    \itemindent\listparindent
    \rightmargin\leftmargin\parsep 0pt plus 1pt}\item[]}
\let\endquotation=\endlist

% QUOTE -- same as quotation except no paragraph indentation,
%
\def\quote{\list{}{\rightmargin\leftmargin}\item[]}
\let\endquote=\endlist

% DESCRIPTION 
%
%  To change the formatting of the label, you must redefine 
%  \descriptionlabel.  

\def\descriptionlabel#1{\hspace\labelsep \bf #1}
\def\description{\list{}{\labelwidth\z@ \itemindent-\leftmargin
       \let\makelabel\descriptionlabel}}

\let\enddescription\endlist

\newdimen\descriptionmargin
\descriptionmargin=3em


%    ****************************************
%    *         OTHER ENVIRONMENTS           *
%    ****************************************
%
%
% THEOREM 
% \@begintheorem ... \@endtheorem are the commands executed at the
% beginning and end of a (user-defined) theorem-like environment.
% Except \@opargbegintheorem is executed when an optional argument is
% given.  Cf. LATEX.TEX.
%
% \def\@begintheorem#1#2{\it \trivlist \item[\hskip \labelsep{\bf #1\ #2}]}
% \def\@opargbegintheorem#1#2#3{\it \trivlist
%       \item[\hskip \labelsep{\bf #1\ #2\ (#3)}]}
% \def\@endtheorem{\endtrivlist}


% TITLEPAGE
%  In the normal environments, the titlepage environment does nothing but 
%  start and end a page, and inhibit page numbers.  It also resets the
%  page number to zero.  In two-column style, it still makes a one-column
%  page.
\def\titlepage{\@restonecolfalse\if@twocolumn\@restonecoltrue\onecolumn
     \else \newpage \fi \thispagestyle{empty}
% \c@page\z@ -- deleted by jtr: count title page in thesis
}

\def\endtitlepage{\if@restonecol\twocolumn \else \newpage \fi}

% ARRAY AND TABULAR
%

\arraycolsep 5pt     % Half the space between columns in an array environment.
\tabcolsep 6pt       % Half the space between columns in a tabular environment.
\arrayrulewidth .4pt % Width of rules in array and tabular environment.
\doublerulesep 2pt   % Space between adjacent rules in array or tabular env.

% TABBING
%
\tabbingsep \labelsep   % Space used by the \' command.  (See LaTeX manual.)

% MINIPAGE
%  \@minipagerestore is called upon entry to a minipage environment to
%  set up things that are to be handled differently inside a minipage
%  environment. In the current styles, it does nothing.
%
% \skip\@mpfootins : plays same role for footnotes in a minipage as
%                    \skip\footins does for ordinary footnotes

\skip\@mpfootins = \skip\footins

% FRAMEBOX
%
%\fboxsep = 3pt    % Space left between box and text by \fbox and \framebox.
\fboxsep = 1pt    % Space left between box and text by \fbox and \framebox.
\fboxrule = .4pt  % Width of rules in box made by \fbox and \framebox.


%    ****************************************
%    *        CHAPTERS AND SECTIONS         *
%    ****************************************
%
% DEFINE COUNTERS:
%
% \newcounter{NEWCTR}[OLDCTR] : Defines NEWCTR to be a counter, which is
%                               reset to zero when counter OLDCTR is stepped.
%                               Counter OLDCTR must already be defined.

\newcounter {part}
\newcounter {chapter}
\newcounter {bug}    % bug, 89.04.15
\newcounter {section}[chapter]
\newcounter {subsection}[section]
\newcounter {subsubsection}[subsection]
\newcounter {paragraph}[subsubsection]
\newcounter {subparagraph}[paragraph]
\newcounter {tocpage}
\newcounter {lofpage}
\newcounter {lotpage}

% For any counter CTR, \theCTR is a macro that defines the printed version
% of counter CTR.  It is defined in terms of the following macros:
%
%  \arabic{COUNTER} : The value of COUNTER printed as an arabic numeral.
%  \roman{COUNTER}  : Its value printed as a lower-case roman numberal.
%  \Roman{COUNTER}  : Its value printed as an upper-case roman numberal.
%  \alph{COUNTER}   : Value of COUNTER printed as a lower-case letter:
%                         1 = a, 2 = b, etc.
%  \Alph{COUNTER}   : Value of COUNTER printed as an upper-case letter:
%                           1 = A, 2 = B, etc.
%

\def\thepart          {\Roman{part}}
\def\thechapter       {\arabic{chapter}}
\def\thesection       {\thechapter.\arabic{section}}
\def\thesubsection    {\thesection.\arabic{subsection}}
\def\thesubsubsection {\thesubsection .\arabic{subsubsection}}
\def\theparagraph     {\thesubsubsection.\arabic{paragraph}}
\def\thesubparagraph  {\theparagraph.\arabic{subparagraph}}

% \@chapapp is initially defined to be 'Chapter'.  The \appendix
% command redefines it to be 'Appendix'.
%
\def\@chapapp{Chapter}
\setcounter{bug}{0}   %bug, 89.04.15



%    ****************************************
%    *         TABLE OF CONTENTS, ETC.      *
%    ****************************************
%
% A \subsection command writes a
%       \contentsline{subsection}{TITLE}{PAGE}
% command on the .toc file, where TITLE contains the contents of the
% entry and PAGE is the page number.  If subsections are being numbered,
% then TITLE will be of the form
%       \numberline{NUM}{HEADING}
% where NUM is the number produced by \thesubsection.  Other sectioning
% commands work similarly.  
%
% A \caption command in a 'figure' environment writes
%    \contentsline{figure}{\numberline{NUM}{CAPTION}}{PAGE}
% on the .lof file, where NUM is the number produced by \thefigure and
% CAPTION is the figure caption.  It works similarly for a 'table' environment.
%
% The command \contentsline{NAME} expands to \l@NAME.  So, to specify
% the table of contents, we must define \l@chapter, \l@section, 
% \l@subsection, ... ; to specify the list of figures, we must define
% \l@figure; and so on.  Most of these can be defined with the
% \@dottedtocline command, which works as follows.
%
% \@dottedtocline{LEVEL}{INDENT}{NUMWIDTH}{TITLE}{PAGE}
%    LEVEL    : An entry is produced only if LEVEL < or = value of 
%               'tocdepth' counter.  Note, \chapter is level 0, \section
%               is level 1, etc.
%    INDENT   : The indentation from the outer left margin of the start of 
%               the contents line.
%    NUMWIDTH : The width of a box in which the section number is to go,
%               if TITLE includes a \numberline command.
%   
% This command uses the following three parameters, which are set
% with a \def (so em's can be used to make them depend upon the font).
%   \@pnumwidth : The width of a box in which the page number is put.
%   \@tocrmarg  : The right margin for multiple line entries.  One
%                 wants \@tocrmarg > or = \@pnumwidth
%   \@dotsep    : Separation between dots, in mu units.  Should be \def'd to
%                 a number like 2 or 1.7

\def\@pnumwidth{1.55em}
\def\@tocrmarg {2.55em}
\def\@dotsep{4.5}
\setcounter{tocdepth}{2}

%
% added by cew to reset headings for tableofcontents, figures, tables
%
\def\resetheadings{
%  \addtolength{\headsep}{-25pt}
%  \addtolength{\textheight}{25pt}
  %\def\@oddhead{\hbox{}\hfil\rm\thepage}% Heading.
  \def\@oddhead{\hbox{}\hfil\rm}% Heading.
}

% TABLEOFCONTENTS
%  In report style, \tableofcontents, \listoffigures, etc. are always
%  set in single-column style.  @restonecol is used to keep track of
%  whether we need to switch back to double column style after the toc.
%
% The table of contents for a thesis must have the heading `Page' over the
% page numbers.  The current implementation only does this on the first
% table of contents page, which is marginally acceptable.  Doing it on 
% subsequent pages is probably hard.  The right way to do it is to define
% the Page stuff as part of the actual TeX heading, but this requires
% reworking the page layout a little.

\def\tableofcontents{\@restonecolfalse\if@twocolumn\@restonecoltrue\onecolumn
  \fi\chapter*{TABLE OF CONTENTS\markboth{CONTENTS}{CONTENTS}}
  \hbox to \hsize{\hfil Page}
  \vspace{15pt}
  \singlespace
  % following added by cew to get "Page" put on subsequent pages
  \setcounter{tocpage}{0}
%  \addtolength{\headsep}{25pt}
%  \addtolength{\textheight}{-25pt}
  % hacklength should not be necessary, but we get an overfull hbox of
  % 2.6667pt that we do not understand where it comes from when using
  % \textwidth in the \parbox below
  \newlength{\hacklength}
  \setlength{\hacklength}{\textwidth}
  \addtolength{\hacklength}{-3.6667pt}
  \def\@oddhead{\ifnum\value{tocpage}=1
	% 14.5pt is the value of \baselineskip.  However putting in
	% \baselineskip instead seems to give a value of 0pt.  Might be
	% something to do with being inside the \def.
	\raisebox{14.5pt}[0pt][0pt]{\parbox[t]{\hacklength}{
%	\raisebox{28pt}[0pt][0pt]{\parbox[t]{\hacklength}{
	%\hbox{}\hfil\rm\thepage\vspace{5pt}
	\hbox{}\hfil\rm\vspace{0pt}
	\hbox to \hsize{\hfil Page}
	}}
    \else
	%\hbox{}\hfil\rm\thepage
	\hbox{}\hfil\rm
	\setcounter{tocpage}{1}
    \fi}
  \@starttoc{toc}\if@restonecol\twocolumn\fi
  \newpage
  \resetheadings
  \doublespace
  }

\def\l@part#1#2{\addpenalty{-\@highpenalty}
   \addvspace{2.25em plus 1pt}  % space above part line
   \begingroup
   \@tempdima 3em         % width of box holding part number, used by
     \parindent \z@ \rightskip \@pnumwidth             %% \numberline
     \parfillskip -\@pnumwidth
     {\large \bf          % set line in \large boldface
     \leavevmode          % TeX command to enter horizontal mode.
     #1\hfil \hbox to\@pnumwidth{\hss #2}}\par
     \nobreak             % Never break after part entry
   \endgroup}

\def\l@chapter#1#2{\pagebreak[3]
   \vskip\@tocchapterskip % space above chapter line
   %\vskip 1.0em plus 1pt
   \@dottedtocline{0}{0pt}{1.5em}{{\bf#1}}{#2}
   \vskip\@tocchapterskip % space below chapter line
}
\def\@tocchapterskip{1.0em plus 1pt} 

%\def\l@section#1#2{\pagebreak[3]
%  %\vskip 1.0em plus 1pt
%  \@dottedtocline{0}{0pt}{1.5em}{{\bf#1}}{#2}
%  %\vskip 1.0em plus 1pt
%}

%bug 89.01.10 changed 0..5 --> 00.00
      
\def\l@section{\@dottedtocline{0}{1.5em}{2.3em}}
\def\l@subsection{\@dottedtocline{0}{3.8em}{3.2em}}
\def\l@subsubsection{\@dottedtocline{0}{7.0em}{4.1em}}
\def\l@paragraph{\@dottedtocline{0}{10em}{5em}}
\def\l@subparagraph{\@dottedtocline{0}{12em}{6em}}

% LIST OF FIGURES
% svb: added command to generate table of contents entry
%
\def\listoffigures{\@restonecolfalse
  \if@twocolumn\@restonecoltrue\onecolumn\fi
  \chapter*{LIST OF FIGURES}
  %
  % the contents line and the markboth commands used to be inside
  % the argument to the \chapter* command.  I moved them outside
  % since my \uppercase in the chapter seems to have messed them
  % up.  It seems reasonable, although I can't guess why they were
  % inside in the first place.     jtr 7/3/86
  %
  \addcontentsline{toc}{chapter}{LIST OF FIGURES}
  \relax\markboth{LIST OF FIGURES}{LIST OF FIGURES}
  \hbox to \hsize{\phantom{99} Figure\hfil Page}
  \vspace{15pt}
  \singlespace
  % following added by cew to get "Page" put on subsequent pages
  \setcounter{lofpage}{0}
%  \addtolength{\headsep}{25pt}
%  \addtolength{\textheight}{-25pt}
  % hacklength should not be necessary, but we get an overfull hbox of
  % 2.6667pt that we do not understand where it comes from when using
  % \textwidth in the \parbox below
  \setlength{\hacklength}{\textwidth}
  \addtolength{\hacklength}{-2.6667pt}
  \def\@oddhead{\ifnum\value{lofpage}=1
	% 14.5pt is the value of \baselineskip.  However putting in
	% \baselineskip instead seems to give a value of 0pt.  Might be
	% something to do with being inside the \def.
	\raisebox{25pt}[0pt][0pt]{\parbox[t]{\hacklength}{
%	\raisebox{40pt}[0pt][0pt]{\parbox[t]{\hacklength}{
	%\hbox{}\hfil\rm\thepage\vspace{7pt}
	\hbox{}\hfil\rm\vspace{7pt}
	\hbox to \hsize{Figure\hfil Page}
	\mbox{\vspace{30pt}}   % Fwolong
	\vskip 30pt
	}}
    \else
	%\hbox{}\hfil\rm\thepage
	\hbox{}\hfil\rm
	\setcounter{lofpage}{1}
    \fi}
  \@starttoc{lof}  \if@restonecol\twocolumn\fi
  \newpage
  \resetheadings
  \doublespace

}

\def\l@figure{
  \vskip 1.0em plus 1pt  % space above figure or table description  - jtr
  %bug 89.01.10
  \@dottedtocline{0}{1.5em}{2.3em}
}

% LIST OF TABLES
% svb: added command to generate table of contents entry
%
\def\listoftables{\@restonecolfalse
  \if@twocolumn\@restonecoltrue\onecolumn\fi
  \chapter*{LIST OF TABLES}
  %
  % the contents line and the markboth commands used to be inside
  % the argument to the \chapter* command.  I moved them outside
  % since my \uppercase in the chapter seems to have messed them
  % up.  It seems reasonable, although I can't guess why they were
  % inside in the first place.     jtr 7/3/86
  %
  \addcontentsline{toc}{chapter}{LIST OF TABLES}
  \relax\markboth{LIST OF TABLES}{LIST OF TABLES}
  \hbox to \hsize{\phantom{99} Table\hfil Page}
  \vspace{15pt}
  \singlespace
  % following added by cew to get "Page" put on subsequent pages
  \setcounter{lotpage}{0}
%  \addtolength{\headsep}{25pt}
%  \addtolength{\textheight}{-25pt}
  % hacklength should not be necessary, but we get an overfull hbox of
  % 2.6667pt that we do not understand where it comes from when using
  % \textwidth in the \parbox below
  \setlength{\hacklength}{\textwidth}
  \addtolength{\hacklength}{-2.6667pt}
  \def\@oddhead{\ifnum\value{lotpage}=1
	% 14.5pt is the value of \baselineskip.  However putting in
	% \baselineskip instead seems to give a value of 0pt.  Might be
	% something to do with being inside the \def.
%	\raisebox{14.5pt}[0pt][0pt]{\parbox[t]{\hacklength}{
%	\raisebox{28pt}[0pt][0pt]{\parbox[t]{\hacklength}{
	\raisebox{25pt}[0pt][0pt]{\parbox[t]{\hacklength}{
	%\hbox{}\hfil\rm\thepage\vspace{7pt}
	\hbox{}\hfil\rm\vspace{7pt}   %­ì¨Ó¬O 10pt
	\hbox to \hsize{Table\hfil Page}
	\mbox{\vspace{30pt}}   % Fwolong
	\vskip 30pt
	}}
    \else
	%\hbox{}\hfil\rm\thepage
	\hbox{}\hfil\rm
	\setcounter{lotpage}{1}
    \fi}
  \@starttoc{lot}\if@restonecol\twocolumn\fi
  \newpage
  \resetheadings
  \doublespace
}

\let\l@table\l@figure

%    ****************************************
%    *             BIBLIOGRAPHY             *
%    ****************************************
%
% The thebibliography environment executes the following commands:
%
%  o start a new 'chapter' with BIBLIOGRAPHY as the heading
%  o produce a separator page for the bibliography
%
%  \def\newblock{\hskip .11em plus .33em minus -.07em} --
%      Defines the `closed' format, where the blocks (major units of 
%      information) of an entry run together.
%
%  \sloppy  -- Used because it's rather hard to do line breaks in
%      bibliographies,
% 
%  \sfcode`\.=1000\relax --
%      Causes a `.' (period) not to produce an end-of-sentence space.
%
\def\thebibliography#1{
  \typeout{Using the thesis bibliography style!}
  \separatorpage{BIBLIOGRAPHY}
  \chapter*{BIBLIOGRAPHY\markboth{BIBLIOGRAPHY}{BIBLIOGRAPHY}}
  \addcontentsline{toc}{chapter}{BIBLIOGRAPHY}
  \vspace{0.375in}	  % added by cew to match 4 line requirement
  \interlinepenalty=10000 % added by cew to prevent breaking of bib entries
  \singlespace
  \list
  {[\arabic{enumi}]}{\settowidth\labelwidth{[#1]}\leftmargin\labelwidth
    \advance\leftmargin\labelsep
    \usecounter{enumi}}
    \def\newblock{\hskip .11em plus .33em minus -.07em}
    \sloppy
    \sfcode`\.=1000\relax}

\let\endthebibliography=\endlist

% \def\@biblabel#1{[#1]\hfill}  % Produces the label for a \bibitem[...]
                                % command.
% \def\@cite#1{[#1]}            % Produces the output of the \cite command.



%    ****************************************
%    *              THE INDEX               *
%    ****************************************
%
% THE THEINDEX ENVIRONMENT
% Produces double column format, with each paragraph a separate entry.
% The user commands \item, \subitem and \subsubitem are used to
% produce the entries, and \indexspace adds an extra vertical space
% that's the right size to put above the first entry with a new letter
% of the alphabet.

\newif\if@restonecol

\def\theindex{\@restonecoltrue\if@twocolumn\@restonecolfalse\fi
\columnseprule \z@
\columnsep 35pt\twocolumn[\@makeschapterhead{Index}]
    \markboth{INDEX}{INDEX}\thispagestyle{plain}\parindent\z@
    \parskip\z@ plus .3pt\relax\let\item\@idxitem}

\def\@idxitem{\par\hangindent 40pt}

\def\subitem{\par\hangindent 40pt \hspace*{20pt}}

\def\subsubitem{\par\hangindent 40pt \hspace*{30pt}}

\def\endtheindex{\if@restonecol\onecolumn\else\clearpage\fi}

\def\indexspace{\par \vskip 10pt plus 5pt minus 3pt\relax}


%    ****************************************
%    *             FOOTNOTES                *
%    ****************************************
%
% \footnoterule is a macro to draw the rule separating the footnotes from
% the text.  It should take zero vertical space, so it needs a negative
% skip to compensate for any positive space taken by the rule.  (See
% PLAIN.TEX.)

\def\footnoterule{\kern-3\p@   
  \hrule width .4\columnwidth
  \kern 2.6\p@}                 % The \hrule has default height of .4pt .

% \newcounter{footnote}
\@addtoreset{footnote}{chapter}  % Numbers footnotes within chapters

%   \@makefntext{NOTE} :
%        Must produce the actual footnote, using \@thefnmark as the mark 
%        of the footnote and NOTE as the text.  It is called when effectively
%        inside a \parbox of width \columnwidth (i.e., with \hsize = 
%        \columnwidth).  
%
%        The following macro indents all lines of the footnote by 10pt, and 
%        indents the first line of a new paragraph by 1em.  To change these 
%        dimensions, just substitute the desired value for '10pt' [in both 
%        places] or '1em'.  The mark is flushright against the footnote. 
%          \long\def\@makefntext#1{\@setpar{\@@par\@tempdima \hsize 
%             \advance\@tempdima-10pt\parshape \@ne 10pt \@tempdima}\par
%             \parindent 1em\noindent \hbox to \z@{\hss$^{\@thefnmark}$}#1}
%
%        A simpler macro is used, in which the footnote text is
%        set like an ordinary text paragraph, with no indentation except
%        on the first line of a paragraph, and the first line of the
%        footnote.  Thus, all the macro must do is set \parindent
%        to the appropriate value for succeeding paragraphs and put the 
%        proper indentation before mark.

\long\def\@makefntext#1{\parindent 1em\noindent 
            \hbox to 1.8em{\hss$^{\@thefnmark}$}\singlespace\footnotesize#1}

% \@makefnmark : A macro to generate the footnote marker that goes
%    in the text.  Default used.
%



%    ****************************************
%    *         FIGURES AND TABLES           *
%    ****************************************
% 
% Float placement parameters.  See LaTeX manual for their definition.
%
% Note: some really flaky hiccups can happen because of interactions between
% these numbers.  For instance, if \textfraction and \floatpagefraction
% don't have any overlap figures can be drawn that are too large to fit
% on a text page and too small to fit on a float page.  This problem causes
% all of the figures to go to the end of the chapter.
%
\setcounter{topnumber}{2}
%\def\topfraction{.5}
\def\topfraction{.7}
\setcounter{bottomnumber}{1}
%\def\bottomfraction{.3}
\def\bottomfraction{.2}
\setcounter{totalnumber}{3}
%\def\textfraction{.51}
\def\textfraction{.3}
%\def\floatpagefraction{.5}
\def\floatpagefraction{.6}
\setcounter{dbltopnumber}{2}
\def\dbltopfraction{.7}
\def\dblfloatpagefraction{.5}

% \@makecaption{NUMBER}{TEXT} : Macro to make a figure or table caption.  
%      NUMBER : Figure or table number--e.g., 'Figure 3.2' 
%      TEXT   : The caption text.
%  Macro should be called inside a \parbox of right width, with \normalsize.

\long\def\@makecaption#1#2{
   \vskip 10pt
% svb: two spaces replace colon
   \setbox\@tempboxa\hbox{#1\ \ #2}
   \ifdim \wd\@tempboxa >\hsize   % IF longer than one line:
      {\singlespace
       \unhbox\@tempboxa\par      %   THEN set as ordinary paragraph.
      }
     \else                        %   ELSE  center.
       \hbox to\hsize{\hfil\box\@tempboxa\hfil}  
   \fi}

% To define a float of type TYPE (e.g., TYPE = figure), the document style 
% must define the following.
%
%  \fps@TYPE   : The default placement specifier for floats of type TYPE.
%
%  \ftype@TYPE : The type number for floats of type TYPE.  Each TYPE has
%                associated a unique positive TYPE NUMBER, which is a power 
%                of two.  E.g., figures might have type number 1, tables type 
%                number 2, programs type number 4, etc.
%
%  \ext@TYPE   : The file extension indicating the file on which the 
%                contents list for float type TYPE is stored.  For example, 
%                \ext@figure = 'lof'.
%
%  \fnum@TYPE  : A macro to generate the figure number for a caption.
%                For example, \fnum@TYPE == Figure \thefigure.
%
%  The actual float-making environment commands--e.g., the commands
%  \figure and \endfigure--are defined in terms of the macros \@float
%  and \end@float, which are described below.
%
%  \@float{TYPE}[PLACEMENT] : Macro to begin a float environment for a 
%     single-column float of type TYPE with PLACEMENT as the placement 
%     specifier.  The default value of PLACEMENT is defined by \fps@TYPE.   
%     The environment is ended by \end@float.  
%     E.g., \figure == \@float{figure}, \endfigure == \end@float.


% FIGURE

\newcounter{figure}[chapter]
\def\thefigure{\thechapter.\@arabic\c@figure}

\def\fps@figure{tbp}
\def\ftype@figure{1}
\def\ext@figure{lof}
\def\fnum@figure{Figure \thefigure}
\def\figure{\@float{figure}}
\let\endfigure\end@float
\@namedef{figure*}{\@dblfloat{figure}}
\@namedef{endfigure*}{\end@dblfloat}

% TABLE
%
\newcounter{table}[chapter]
\def\thetable{\thechapter.\@arabic\c@table}

\def\fps@table{tbp}
\def\ftype@table{2}
\def\ext@table{lot}
\def\fnum@table{Table \thetable}
\def\table{\@float{table}}
\let\endtable\end@float
\@namedef{table*}{\@dblfloat{table}}
\@namedef{endtable*}{\end@dblfloat}


%    ****************************************
%    *         TITLE AND ABSTRACT           *
%    ****************************************
%
%
% Uses thesis title and abstract format.
% -- jtr 6-3-86

\input thesistitlepage.sty


%    ****************************************
%    *            PAGE STYLES               *
%    ****************************************
%
% The page style 'foo' is defined by defining the command \ps@foo.  This
% command should make only local definitions.  There should be no stray
% spaces in the definition, since they could lead to mysterious extra
% spaces in the output.
%
% The \ps@... command defines the macros \@oddhead, \@oddfoot,
% \@evenhead, and \@evenfoot to define the running heads and
% feet---e.g., \@oddhead is the macro to produce the contents of the
% heading box for odd-numbered pages.  It is called inside an \hbox of
% width \textwidth.
%
% To make headings determined by the sectioning commands, the page style
% defines the commands \chaptermark, \sectionmark, ... , where
% \chaptermark{TEXT} is called by \chapter to set a mark, and so on.
% The \...mark commands and the \...head macros are defined with the
% help of the following macros.  (All the \...mark commands should be
% initialized to no-ops.)
%
% MARKING CONVENTIONS:
% LaTeX extends TeX's \mark facility by producing two kinds of marks
% a 'left' and a 'right' mark, using the following commands:
%     \markboth{LEFT}{RIGHT} : Adds both marks.
%     \markright{RIGHT}      : Adds a 'right' mark.
%     \leftmark  : Used in the \@oddhead, \@oddfoot, \@evenhead or \@evenfoot
%                  macro, gets the current 'left'  mark.  Works like TeX's 
%                  \botmark command.
%     \rightmark : Used in the \@oddhead, \@oddfoot, \@evenhead or \@evenfoot
%                  macro, gets the current 'right'  mark.  Works like TeX's 
%                  \firstmark command.
% The marking commands work reasonably well for right marks 'numbered 
% within' left marks--e.g., the left mark is changed by a \chapter command and
% the right mark is changed by a \section command.  However, it does
% produce somewhat anomalous results if two \bothmark's occur on the same page.
% 

\mark{{}{}}   % Initializes TeX's marks

% \def\ps@empty{\def\@oddhead{}
%   \def\@oddfoot{}
%   \def\@evenhead{}\def\@evenfoot{}}
%
% \def\ps@plain{\def\@oddhead{}
%   \def\@oddfoot{\rm\hfil\thepage\hfil}
%   \def\@evenhead{}
%   \let\@evenfoot\@oddfoot}

% Definition of 'headings' page style 
%  Note the use of ##1 for parameter of \def\chaptermark inside the
%  \def\ps@headings.
%

\if@twoside         % If two-sided printing.
\def\ps@headings{\def\@oddfoot{}\def\@evenfoot{}%       No feet.
\def\@evenhead{\rm \thepage\hfil \sl \leftmark}%        Left heading.
\def\@oddhead{\hbox{}\sl \rightmark \hfil \rm\thepage}% Right heading.
\def\chaptermark##1{\markboth {\uppercase{\ifnum \c@secnumdepth >\m@ne
      \@chapapp\ \thechapter. \ \fi ##1}}
      \begin{center} {} \end{center}}%
\def\sectionmark##1{\markright {\uppercase{\ifnum \c@secnumdepth >\z@
   \thesection. \ \fi ##1}}}}
\else               % If one-sided printing.
\def\ps@headings{\def\@oddfoot{}\def\@evenfoot{}%     No feet.
\def\@oddhead{\hbox {}\sl \rightmark \hfil \rm\thepage}% Heading.
\def\chaptermark##1{\markright {\uppercase{\ifnum \c@secnumdepth >\m@ne
  \@chapapp\ \thechapter. \ \fi ##1}}}}
\fi

% Definition of 'thesis' page style -- riedl
%  -- no footer
%  -- header is just page number, in upper right corner
%  -- chaptermark and sectionmark are not needed
%  Note the use of ##1 for parameter of \def\chaptermark inside the
%  \def\ps@headings.
%

\if@twoside         % If two-sided printing.
\def\ps@thesis{\def\@oddfoot{}\def\@evenfoot{}%       No feet.
\def\@evenhead{\rm \thepage\hfil}%        Left heading.
\def\@oddhead{\hbox{}\hfil\rm\thepage}% Right heading.
\def\chaptermark##1{}
\def\sectionmark##1{}
}
\else               % If one-sided printing.
\def\ps@thesis{\def\@oddfoot{}\def\@evenfoot{}%     No feet.
\def\@oddhead{\hbox{}\hfil\rm\thepage}% Heading.
\def\chaptermark##1{}
}
\fi

% Definition of 'thesisdraft' page style -- riedl
%  -- page number is always in the upper right corner
%  -- header is *not* set by sectioning commands
%  -- markright/markboth may be used to set header
%  -- footer is set to identify this as a draft version (timestamped)
%  -- footer may be changed by changing \@draftfoot
%  Note the use of ##1 for parameter of \def\chaptermark inside the
%  \def\ps@headings.
%

% define \@draftfoot

\newcounter{currenthour} \newcounter{currentminute}
\newcommand{\now}{
  \setcounter{currenthour}{\time}\divide \c@currenthour by 60
  \setcounter{currentminute}{\time}
    \multiply \c@currenthour by 60
    \addtocounter{currentminute}{-\c@currenthour}
    \divide \c@currenthour by 60
  \ifnum \c@currenthour=0 0 \fi    % force at least one digit in hour
  \thecurrenthour:%
  \ifnum \c@currentminute<10 0\fi % force two digits in minute
  \thecurrentminute
}

\def\@draftfooter{
  {{\rm Draft:}{\sc\ Do Not Distribute}\hfil{Date:\ \today}\hfil{Time:\now}}
}

\if@twoside         % If two-sided printing.
\def\ps@thesisdraft{\def\@oddfoot {\@draftfooter}
                    \def\@evenfoot{\@draftfooter}
\def\@evenhead{\rm \thepage\hfil \sl \leftmark}%        Left heading.
\def\@oddhead{\hbox{}\sl \rightmark \hfil \rm\thepage}% Right heading.
\def\chaptermark##1{}
\def\sectionmark##1{}
}
\else               % If one-sided printing.
\def\ps@thesisdraft{\def\@oddfoot {\@draftfooter}
                    \def\@evenfoot{}
\def\@oddhead{\hbox {}\sl \rightmark \hfil \rm\thepage}% Heading.
\def\chaptermark##1{}
}
\fi

% Definition of 'myheadings' page style.  
%
\def\ps@myheadings{\def\@oddhead{\hbox{}\sl\rightmark \hfil \rm\thepage}%
\def\@oddfoot{}\def\@evenhead{\rm \thepage\hfil\sl\leftmark\hbox {}}%
\def\@evenfoot{}\def\sectionmark##1{}\def\subsectionmark##1{}}



%    ****************************************
%    *            MISCELLANEOUS             *
%    ****************************************
%
% DATE
%
\def\today{\ifcase\month\or
  January\or February\or March\or April\or May\or June\or
  July\or August\or September\or October\or November\or December\fi
  \space\number\day, \number\year}

% EQUATION and EQNARRAY -- put here because it must follow \chapter definition
%
% \newcounter{equation}    
%
\@addtoreset{equation}{chapter}   % Makes \chapter reset 'equation' counter.

\def\theequation{\thechapter.\arabic{equation}}

% \jot = 3pt      % Extra space added between lines of an eqnarray environment

% The macro \@eqnnum defines how equation numbers are to appear in equations.
%
% \def\@eqnnum{(\theequation)} 
% 


%    ****************************************
%    *           INITIALIZATION             *
%    ****************************************
%
% Default initializations

\ps@thesis                  % 'plain' page style
\pagenumbering{arabic}      % Arabic page numbers
\onecolumn                  % Single-column.
\if@twoside\else\raggedbottom\fi % Ragged bottom unless twoside option.

% svb: The following penalties are for conforming with Purdue's
%      requirements for the thesis format.
%
\brokenpenalty=10000
\clubpenalty=10000
\widowpenalty=10000
